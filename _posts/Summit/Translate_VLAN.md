---
title: Translate VLAN
category: Summit
date: 2019-04-15
---

_Міліцію в поліцію, почту в мочту, маму в папу, мєдвєдя в пєдвєдя._
-----


Довольно часто возникает задача изменить тег VLAN внутри коммутатора. Сетевое оборудование многих сетевых вендоров или не умеют этого делать или делает только в старших моделях. Коммутаторы Extreme и раньше умели транслировать VLAN, но начиная с версии ПО 12.6 делать это стало проще и удобнее.

Как известно, в софте 12.6 появился функционал Selective Q-in-Q.
Среди возможностей, предоставляемых Selective Q-in-Q основными являются:

• Выбор S-VLAN в зависимости от C-TAG
• Трансляция C-TAG
• Фильтрация C-TAG

Предлагаемая технология трансляции VLAN как раз основана на втором пункте возможностей Selective Q-in-Q, а именно трансляции C-TAG.
Порты, между которыми требуется сделать трансляцию, настраиваются как cep (Customer Edge Port) порты произвольного VMAN.
Остальные VLAN, транслировать которые не требуется, настраиваются как обычные тегированные VLAN.



Команда, используемая для трансляции VLAN:
`configure vman add ports cep cvid {-
} {translate {- }}`

Ниже описан пример настройки двух VLAN. VLAN 2003 настраивается как обычный тегированный VLAN на портах 11 и 12 коммутатора, как представлено на схеме выше. Второй VLAN траслируется из 2004 в 2014 и обратно.
На порту 11 коммутатора настраивается VLAN 2004, на порту 12 VLAN 2014, который попадая на порт 12 транслируется в VLAN 2004.

`configure vlan vl2003 add ports 11,tagged`

configure vman vm add ports 11 cep cvid 2014
configure vman vm add ports 12 cep cvid 2004 translate 2014

Для трансляции VLAN требуется только программное обеспечение 12.6 и выше. Никаких дополнительных лицензий не требуется.

-----